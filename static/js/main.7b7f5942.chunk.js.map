{"version":3,"sources":["store.js","components/shop-header/index.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/index.js","components/hoc/with-bookstore-service.js","actions/index.js","utiles/compose.js","components/spinner/index.js","components/error-indicator/index.js","components/book-list/book-list.js","components/book-list/index.js","components/pages/home-page.js","components/shopping-cart-table/index.js","components/pages/cart-page.js","components/app/index.js","components/error-boundary/index.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","index.js"],"names":["timeout","connect","shoppingCart","total","orderTotal","numItems","orderNumItems","className","to","BookListItem","book","onAddedToCart","title","author","price","coverImage","src","alt","href","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","booksLoaded","newBooks","type","payload","booksError","error","bookAddedToCart","bookId","fetchBooks","dispatch","getBooks","then","data","catch","err","compose","funcs","comp","reduceRight","wrapped","f","Spinner","ErrorIndicator","BookList","books","map","key","id","BookListContainer","this","loading","Component","bookList","ownProps","bindActionCreators","HomePage","items","cartItems","onIncrease","onDecrease","onDelete","item","idx","count","CartPage","App","role","path","component","exact","ErrorBoundary","state","hasError","info","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","updateBookList","action","undefined","updateCartItems","slice","updateOrderTotal","forEach","updateNumItems","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","console","log","getState","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.7b7f5942.chunk.js","sourcesContent":["import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\n\r\nimport reducer from './reducers';\r\n\r\nconst logMiddleware = (store) => (dispatch) => (action) => {\r\n    console.log(action.type, store.getState());\r\n    return dispatch(action);\r\n};\r\n\r\nconst stringMiddleware = () => (next) => (action) => {\r\n    if (typeof action === 'string') {\r\n        return next({\r\n            type: action\r\n        });\r\n    }\r\n\r\n    return next(action);\r\n};\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunkMiddleware,stringMiddleware, logMiddleware));\r\n\r\nconst delayedActionCreator = (timeout) => (dispatch) => {\r\n    setTimeout(() => dispatch({\r\n        type: 'DELAYED_ACTION'\r\n    }), timeout);\r\n};\r\n\r\nstore.dispatch('HELLO_WORLD');\r\n\r\nstore.dispatch(delayedActionCreator(3000));\r\n\r\nexport default store;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './shop-header.css';\r\n\r\nconst ShopHeader = ({ numItems, total }) => {\r\n    return (\r\n        <header className=\"shop-header row\">\r\n            <Link to=\"/\">\r\n                <div className=\"logo text-dark\">ReStore</div>\r\n            </Link>\r\n            <Link to=\"/cart\">\r\n                <div className=\"shopping-cart\">\r\n                    <i className=\"cart-icon fa fa-shopping-cart\" />\r\n                    {numItems} items (${total})\r\n                </div>\r\n            </Link>\r\n        </header>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { orderTotal, orderNumItems }}) => {\r\n    return {\r\n        total: orderTotal,\r\n        numItems: orderNumItems\r\n    };\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps)(ShopHeader);","import BookListItem from './book-list-item';\r\n\r\nexport default BookListItem;","import React from 'react';\r\nimport './book-list-item.css';\r\n\r\nconst BookListItem = ({book, onAddedToCart}) => {\r\n    const  { title, author, price, coverImage } = book;\r\n    return (\r\n        <div className=\"book-list-item\">\r\n            <div className=\"book-cover\">\r\n                <img src={coverImage} alt=\"cover\"/>\r\n            </div>\r\n            <div className=\"book-details\">\r\n                <span href=\"#\" className=\"book-title\">{title}</span>\r\n                <div className=\"book-author\">{author}</div>\r\n                <div className=\"book-price\">${price}</div>\r\n                <button\r\n                    onClick={onAddedToCart}\r\n                    className=\"btn btn-info add-to-cart\">Add to cart</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BookListItem;","import React from 'react';\r\n\r\nconst {\r\n    Provider : BookstoreServiceProvider,\r\n    Consumer : BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n    BookstoreServiceProvider,\r\n    BookstoreServiceConsumer\r\n};","import React from 'react';\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n    return (props) => {\r\n        return (\r\n            <BookstoreServiceConsumer >\r\n                {\r\n                    (bookstoreService) => {\r\n                        return(<Wrapped {...props} bookstoreService={bookstoreService}/>);\r\n                    }\r\n                }\r\n            </BookstoreServiceConsumer>\r\n        );\r\n    }\r\n};\r\n\r\nexport default withBookstoreService;","\r\nconst booksLoaded = (newBooks) => {\r\n    return {\r\n        type: 'FETCH_BOOKS_SUCCESS',\r\n        payload: newBooks\r\n    };\r\n};\r\n\r\nconst booksRequested = () => {\r\n    return {\r\n        type: 'FETCH_BOOKS_REQUEST'\r\n    };\r\n};\r\n\r\nconst booksError = (error) => {\r\n    return {\r\n        type: 'FETCH_BOOKS_FAILURE',\r\n        payload: error\r\n    };\r\n};\r\n\r\nconst bookAddedToCart = (bookId) => {\r\n    return {\r\n        type: 'BOOK_ADDED_TO_CART',\r\n        payload: bookId\r\n    };\r\n};\r\n\r\nconst bookRemovedFromCart = (bookId) => {\r\n    return {\r\n        type: 'BOOK_REMOVED_FROM_CART',\r\n        payload: bookId\r\n    };\r\n};\r\n\r\nconst allBooksRemovedFromCart = (bookId) => {\r\n    return {\r\n        type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n        payload: bookId\r\n    };\r\n};\r\n\r\nconst fetchBooksOld = (bookstoreService, dispatch) => () => {\r\n    dispatch(booksRequested());\r\n    bookstoreService.getBooks()\r\n        .then((data) =>  dispatch(booksLoaded(data)))\r\n        .catch((err) =>  dispatch(booksError(err)));\r\n};\r\n\r\nconst fetchBooks = (bookstoreService)=> () => (dispatch) => {\r\n    dispatch(booksRequested());\r\n    bookstoreService.getBooks()\r\n        .then((data) =>  dispatch(booksLoaded(data)))\r\n        .catch((err) =>  dispatch(booksError(err)));\r\n};\r\n\r\nexport {\r\n    fetchBooks,\r\n    bookAddedToCart,\r\n    bookRemovedFromCart,\r\n    allBooksRemovedFromCart\r\n};","const compose = (...funcs) => (comp) => {\r\n    return funcs.reduceRight(\r\n        (wrapped, f) => f(wrapped), comp);\r\n};\r\n\r\nexport default compose;","import React from 'react';\r\nimport './spinner.css';\r\n\r\nconst Spinner = () => {\r\n    return (\r\n        <div className=\"loadingio-spinner-double-ring-gsb9fxct08\"><div className=\"ldio-a7wpk4qh2d6\">\r\n            <div></div>\r\n            <div></div>\r\n            <div>\r\n                <div></div>\r\n            </div>\r\n            <div>\r\n                <div></div>\r\n            </div>\r\n        </div></div>\r\n    )\r\n};\r\n\r\nexport default Spinner;","import React from 'react';\r\n\r\nimport './error-indicator.css';\r\n\r\nconst ErrorIndicator = () => {\r\n    return (\r\n        <div className=\"error-indicator\">\r\n            <span className=\"boom\">BOOM!</span>\r\n            <span>something has gone terribly wrong</span>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default ErrorIndicator;","import React, { Component } from 'react';\r\nimport BookListItem from '../book-list-item';\r\n\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withBookstoreService } from '../hoc';\r\nimport { fetchBooks, bookAddedToCart } from '../../actions';\r\nimport { compose } from '../../utiles';\r\nimport Spinner from '../spinner';\r\nimport ErrorIndicator from '../error-indicator';\r\nimport './book-list.css';\r\n\r\nconst BookList = ({books, onAddedToCart }) => {\r\n    return (\r\n        <ul className=\"book-list\">\r\n            {\r\n                books.map((book) => {\r\n                    return (\r\n                        <li key={book.id}>\r\n                            <BookListItem\r\n                                book={book}\r\n                                onAddedToCart={() => onAddedToCart(book.id)} />\r\n                        </li>\r\n                    )\r\n                })\r\n            }\r\n        </ul>\r\n    );\r\n};\r\n\r\nclass BookListContainer extends Component {\r\n\r\n    componentDidMount () {\r\n        this.props.fetchBooks();\r\n    }\r\n\r\n    render() {\r\n        const { books, loading, error, onAddedToCart} = this.props;\r\n\r\n        if (loading) {\r\n            return <Spinner />;\r\n        }\r\n\r\n        if (error) {\r\n            return <ErrorIndicator />;\r\n        }\r\n\r\n        return <BookList books={books}\r\n                         onAddedToCart={onAddedToCart} />\r\n    };\r\n}\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error }}) => {\r\n    return { books, loading, error };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    const { bookstoreService } = ownProps;\r\n    return bindActionCreators({\r\n        fetchBooks: fetchBooks(bookstoreService),\r\n        onAddedToCart: bookAddedToCart\r\n    }, dispatch)\r\n};\r\n\r\nexport default compose(\r\n    withBookstoreService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer);","import BookList from './book-list';\r\n\r\nexport default BookList;","import React from 'react';\r\nimport BookList from '../book-list';\r\n\r\nconst HomePage = () => {\r\n    return <div>\r\n        <BookList />\r\n    </div>\r\n};\r\n\r\nexport default HomePage;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bookAddedToCart, allBooksRemovedFromCart, bookRemovedFromCart } from '../../actions';\r\nimport './shopping-cart-table.css';\r\n\r\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete }) => {\r\n    const renderRow = (item, idx) => {\r\n        const { id, title, count, total } = item;\r\n        return(\r\n            <tr key={id}>\r\n                <td>{idx + 1}</td>\r\n                <td>{title}</td>\r\n                <td>{count}</td>\r\n                <td>${total}</td>\r\n                <td>\r\n                    <button\r\n                        onClick={() => onDelete(id) }\r\n                        className=\"btn btn-outline-danger btn-sm float-right\">\r\n                        <i className=\"fa fa-trash-o\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => onIncrease(id)}\r\n                        className=\"btn btn-outline-success btn-sm float-right\">\r\n                        <i className=\"fa fa-plus-circle\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => onDecrease(id)}\r\n                        className=\"btn btn-outline-warning btn-sm float-right\">\r\n                        <i className=\"fa fa-minus-circle\" />\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        )\r\n    };\r\n\r\n    return (\r\n        <div className=\"shopping-cart-table\">\r\n            <h2>Your Order</h2>\r\n            <table className=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>#</th>\r\n                        <th>Item</th>\r\n                        <th>Count</th>\r\n                        <th>Total</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                    {\r\n                        items.map(renderRow)\r\n                    }\r\n                </tbody>\r\n            </table>\r\n\r\n            <div className=\"total\">\r\n                Total: ${total}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal }}) => {\r\n    return {\r\n        items: cartItems,\r\n        total: orderTotal\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onIncrease: (id) => dispatch(bookAddedToCart(id)),\r\n        onDecrease: (id) => dispatch(bookRemovedFromCart(id)),\r\n        onDelete: (id) => dispatch(allBooksRemovedFromCart(id))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);","import React from 'react';\r\nimport ShoppingCartTable from '../shopping-cart-table';\r\n\r\nconst CartPage = () => {\r\n    return <div>\r\n        <ShoppingCartTable />\r\n    </div>\r\n};\r\n\r\nexport default CartPage;","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport ShopHeader from '../shop-header';\r\nimport {HomePage, CartPage} from '../pages';\r\n\r\nconst App = () => {\r\n    return (\r\n        <main role=\"main\" className=\"container\">\r\n            <ShopHeader />\r\n            <Switch>\r\n                <Route\r\n                    path=\"/\"\r\n                    component={HomePage}\r\n                    exact />\r\n                <Route\r\n                    path=\"/cart\"\r\n                    component={CartPage} />\r\n            </Switch>\r\n        </main>\r\n    );\r\n};\r\n\r\nexport default App;","import React, { Component } from 'react';\r\n\r\nimport './error-boundary.css';\r\n\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nexport default class ErrorBoundary extends Component {\r\n\r\n    state = {\r\n        hasError: false\r\n    };\r\n\r\n    componentDidCatch(error, info) {\r\n        this.setState({\r\n            hasError: true\r\n        })\r\n    };\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return <ErrorIndicator />\r\n        }\r\n        return this.props.children;\r\n    }\r\n}","export default class BookstoreService {\r\n\r\n    data = [\r\n        {\r\n            id: 1,\r\n            title: 'Production-Ready Microservices',\r\n            author: 'Susan J. Flower',\r\n            price: 32,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'\r\n        },\r\n        {\r\n            id: 2,\r\n            title: 'Release It!',\r\n            author: 'Michael T. Nygard',\r\n            price: 45,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'\r\n        },\r\n        {\r\n            id: 3,\r\n            title: 'Tree friends',\r\n            author: 'Erich Maria Remarque',\r\n            price: 25,\r\n            coverImage: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRz4fqHjPjiKtAzLM1jk2WBB6xwsz6eYXunZTfMP5b1ALQGY0-xFw&s'\r\n        },\r\n        {\r\n            id: 4,\r\n            title: 'Notes about Sherlock Holmes',\r\n            author: 'Arthur Conan Doyle',\r\n            price: 20,\r\n            coverImage: 'https://cdn.eksmo.ru/v2/430000000000063318/COVER/cover1__w600.jpg'\r\n        },\r\n\r\n    ];\r\n\r\n    getBooks() {\r\n        return new Promise((resolve, reject) => {\r\n            setTimeout(() => {\r\n                resolve(this.data);\r\n                //\r\n                // if(Math.random() > 0.75) {\r\n                //     reject(new Error('Something bad happened'));\r\n                // } else {\r\n                //     resolve(this.data)\r\n                // }\r\n            }, 700)\r\n        });\r\n    }\r\n}\r\n","const updateBookList = (state, action) => {\r\n    if (state === undefined) {\r\n        return {\r\n            books: [],\r\n            loading: true,\r\n            error: null\r\n        }\r\n    }\r\n\r\n    switch (action.type) {\r\n        case 'FETCH_BOOKS_REQUEST':\r\n            return {\r\n                books: [],\r\n                loading: true,\r\n                error: null\r\n            };\r\n\r\n        case 'FETCH_BOOKS_SUCCESS':\r\n            return {\r\n                books: action.payload,\r\n                loading: false,\r\n                error: null\r\n            };\r\n\r\n        case 'FETCH_BOOKS_FAILURE':\r\n            return {\r\n                books: [],\r\n                loading: false,\r\n                error: action.payload\r\n            };\r\n        default:\r\n            return state.bookList;\r\n    }\r\n};\r\n\r\nexport default updateBookList;","\r\nconst updateCartItems = (cartItems, item, idx) => {\r\n\r\n    if (item.count === 0) {\r\n        return [\r\n            ...cartItems.slice(0, idx),\r\n            ...cartItems.slice(idx + 1),\r\n        ]\r\n    }\r\n\r\n    if (idx === -1) {\r\n        return [\r\n            ...cartItems,\r\n            item\r\n        ]\r\n    } else {\r\n        return [\r\n            ...cartItems.slice(0, idx),\r\n            item,\r\n            ...cartItems.slice(idx + 1),\r\n        ]\r\n    }\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n\r\n    const {\r\n        id = book.id,\r\n        count = 0,\r\n        title = book.title,\r\n        total = 0 } = item;\r\n\r\n    return {\r\n        id,\r\n        title,\r\n        count: count + quantity,\r\n        total: total + quantity * book.price\r\n    }\r\n};\r\n\r\nconst updateOrderTotal = (items) => {\r\n    let orderTotal =  0;\r\n    items.forEach(({total}) => {orderTotal += total});\r\n    return orderTotal;\r\n};\r\n\r\nconst updateNumItems = (items) => {\r\n    let numItems =  0;\r\n    items.forEach(({count}) => {numItems += count});\r\n    return numItems;\r\n};\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n    const { bookList: { books }, shoppingCart: {cartItems} } = state;\r\n    const book = books.find(({ id }) => id === bookId);\r\n    const itemIndex = cartItems.findIndex(({id}) => id === bookId);\r\n    const item = cartItems[itemIndex];\r\n\r\n    const newItem = updateCartItem(book, item, quantity);\r\n    return {\r\n        orderTotal: updateOrderTotal(updateCartItems(cartItems, newItem, itemIndex)),\r\n        cartItems: updateCartItems(cartItems, newItem, itemIndex),\r\n        orderNumItems: updateNumItems(updateCartItems(cartItems, newItem, itemIndex)),\r\n    };\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n\r\n    if (state === undefined) {\r\n        return {\r\n            cartItems: [],\r\n            orderTotal: 0,\r\n            orderNumItems: 0\r\n        }\r\n    }\r\n\r\n    switch (action.type) {\r\n\r\n        case 'BOOK_ADDED_TO_CART':\r\n            return updateOrder(state, action.payload, 1);\r\n\r\n        case 'BOOK_REMOVED_FROM_CART':\r\n            return updateOrder(state, action.payload, -1);\r\n\r\n        case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n            const item = state.shoppingCart.cartItems.find(({id}) => id === action.payload);\r\n            return updateOrder(state, action.payload, -item.count);\r\n        default:\r\n            return state.shoppingCart;\r\n    }\r\n};\r\n\r\nexport default updateShoppingCart;","import updateBookList from './book-list';\r\nimport updateShoppingCart from './shopping-cart';\r\n\r\nconst reducer = (state, action) => {\r\n\r\n    // console.log(action.type);\r\n    return {\r\n        bookList: updateBookList(state, action),\r\n        shoppingCart: updateShoppingCart(state, action)\r\n    };\r\n};\r\n\r\nexport default reducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/app';\nimport ErrorBoundary from './components/error-boundary';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n    <Provider store={store}>\n        <ErrorBoundary>\n            <BookstoreServiceProvider value={bookstoreService}>\n                <Router>\n                    <App />\n                </Router>\n            </BookstoreServiceProvider>\n        </ErrorBoundary>\n    </Provider>,\n    document.getElementById('root'));"],"sourceRoot":""}